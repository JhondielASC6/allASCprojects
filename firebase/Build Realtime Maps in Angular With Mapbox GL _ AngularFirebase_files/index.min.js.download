!function(){"use strict";var t=window;Object.defineProperty(t,"__esModule",{value:!0});var e,n=function(){function t(){this.value=0}return t.prototype.incrementCounter=function(t){void 0===t&&(t=1),this.value=this.value+t},t.prototype.getCounterValue=function(){return this.value},t.prototype.putCounter=function(t){this.value=t},t}(),r="0.1.0",o="FB-PERF-TRACE-MEASURE",i="fb_iid",u=function(){function t(){}return t.prototype.setPerformance=function(t){this.performance=t},t.prototype.setPerformanceObserver=function(t){this.PerformanceObserver=t},t.prototype.setWindowLocation=function(t){this.windowLocation=t},t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.setNavigator=function(t){this.navigator=t},t.prototype.getNavigator=function(){return this.navigator},t.prototype.setDocument=function(t){this.document=t},t.prototype.getDocument=function(){return this.document},t.prototype.setTti=function(t){var e=this;t&&t.getFirstConsistentlyInteractive&&t.getFirstConsistentlyInteractive().then(function(t){e.tti=t})},t.prototype.getTti=function(){return this.tti},t.prototype.setLocalStorage=function(t){this.localStorage=t},t.prototype.getLocalStorage=function(){return this.localStorage},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance.getEntriesByType(t)},t.prototype.getEntriesByName=function(t){return this.performance.getEntriesByName(t)},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.setupObserver=function(t,o){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var e=0,n=t.getEntries();e<n.length;e++){var r=n[e];o(r)}}).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===e&&(e=new t),e},t}();var a,s=function(){function t(){}return t.getIid=function(){var t=u.getInstance().getLocalStorage(),e=t.getItem(i);if(e)return e;var n=function(t){void 0===t&&(t=7);return Math.random().toString(36).substring(0,t)}();return t.setItem(i,n),n},t}();var c,p,f,l,h,g,m,d,v=function(){function t(){this.isInstrumentationEnabled=!0,this.isDataCollectionEnabled=!0}return t.prototype.setAppId=function(t){if(!t)throw new Error("Firebase config object does not include appId");this.appId=t},t.prototype.getAppId=function(){return this.appId},t.getInstance=function(){return void 0===a&&(a=new t),a},t}();function y(){switch(u.getInstance().getDocument().visibilityState){case"visible":return f.VISIBLE;case"hidden":return f.HIDDEN;case"prerender":return f.PRERENDER;default:return f.UNKNOWN}}(p=c||(c={}))[p.UNKNOWN=0]="UNKNOWN",p[p.UNSUPPORTED=1]="UNSUPPORTED",p[p.CONTROLLED=2]="CONTROLLED",p[p.UNCONTROLLED=3]="UNCONTROLLED",(l=f||(f={}))[l.UNKNOWN=0]="UNKNOWN",l[l.VISIBLE=1]="VISIBLE",l[l.HIDDEN=2]="HIDDEN",l[l.PRERENDER=3]="PRERENDER",l[l.UNLOADED=4]="UNLOADED",(g=h||(h={}))[g.UNKNOWN=0]="UNKNOWN",g[g.CONNECTION_SLOW_2G=1]="CONNECTION_SLOW_2G",g[g.CONNECTION_2G=2]="CONNECTION_2G",g[g.CONNECTION_3G=3]="CONNECTION_3G",g[g.CONNECTION_4G=4]="CONNECTION_4G",(d=m||(m={}))[d.DEBUG=0]="DEBUG",d[d.VERBOSE=1]="VERBOSE",d[d.INFO=2]="INFO",d[d.WARN=3]="WARN",d[d.ERROR=4]="ERROR",d[d.SILENT=5]="SILENT";var N=m.INFO,E=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var o=(new Date).toISOString();switch(e){case m.DEBUG:case m.VERBOSE:console.log.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case m.INFO:console.info.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case m.WARN:console.warn.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case m.ERROR:console.error.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},O=function(){function t(t){this.name=t,this._logLevel=N,this._logHandler=E}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in m))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,m.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,m.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,m.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,m.WARN].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,m.ERROR].concat(t))},t}(),T="@firebase/clearcut-time-cache",_=3,I=function(t){return t.logSource&&t.message&&t.eventTime},b=function(t){if(!t)return[];try{var e=JSON.parse(t);return Array.isArray(e)&&e.every(function(t){return I(t)})?e:[]}catch(t){return[]}}(localStorage.getItem("@firebase/clearcut-cache")),w=function(t){var e=Date.now();if(!t)return 0;var n=new Date(t).getTime();return n<=e?0:n-e}(localStorage.getItem(T)),S=function(t){setTimeout(function(){if(0!==_){if(!b.length)return S(1e4);var t=b.slice();b=[];var i={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}}},a=t.reduce(function(t,e){return t[e.logSource]||(t[e.logSource]=[]),t[e.logSource]=t[e.logSource].concat([e]),t},{}),e=Object.keys(a).map(function(t){var e=a[t],n=e.map(function(t){return{source_extension_json:t.message,event_time_ms:String(t.eventTime)}}),r=e.reduce(function(t,e){return t||e.logSource},null),o=Object.assign({},i,{log_source:r,log_event:n});return fetch("https://us-central1-fireperffw.cloudfunctions.net/cc",{method:"POST",body:JSON.stringify(o)}).then(function(t){if(!t.ok)throw t.statusText;return t.json()}).catch(function(t){b=e.concat(b)})});Promise.all(e).then(function(t){return t.reduce(function(t,e){return Math.max(t,parseInt(e.next_request_wait_millis,10))},1e4)}).then(function(t){localStorage.setItem(T,Date.now()+t),_=3,S(t)}).catch(function(t){_--,console.log("Call to Firebase backend failed. Tries left: "+_+"."),S(1e4)})}},t)};S(w);var R,C;(C=R||(R={}))[C.NetworkRequest=0]="NetworkRequest",C[C.Trace=1]="Trace";var U,D,M=(U=462,D=function(t,e){return e!==R.NetworkRequest?function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs,counters:void 0,custom_attributes:void 0},n=t.getCounters();0!==Object.keys(n).length&&(e.counters=P(n));var r=t.getAttributes();0!==Object.keys(r).length&&(e.custom_attributes=P(r));var o={application_info:k(),trace_metric:e};return JSON.stringify(o)}(t):(n=t,r={url:n.url,http_method:1,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},o={application_info:k(),network_request_metric:r},JSON.stringify(o));var n,r,o},function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=D.apply(void 0,n);!function(t){if(!I(t))throw new Error("Attempted to queue invalid clearcut event");b=b.concat([t])}({logSource:U,message:o,eventTime:Date.now()})}),L=new O("@firebase/performance");function A(t){!v.getInstance().isInstrumentationEnabled&&t.isAuto||(v.getInstance().isDataCollectionEnabled||t.isAuto)&&(t.isAuto&&y()!==f.VISIBLE||L.log(t,R.Trace))}function k(){return{google_app_id:v.getInstance().getAppId(),app_instance_id:s.getIid(),web_app_info:{sdk_version:r,page_url:u.getInstance().getUrl(),service_worker_status:(t=u.getInstance().getNavigator(),"serviceWorker"in t?t.serviceWorker.controller?c.CONTROLLED:c.UNCONTROLLED:c.UNSUPPORTED),visibility_state:y(),effective_connection_type:function(){var t=u.getInstance().getNavigator();switch(t&&t.connection&&t.connection.effectiveType){case"slow-2g":return h.CONNECTION_SLOW_2G;case"2g":return h.CONNECTION_2G;case"3g":return h.CONNECTION_3G;case"4g":return h.CONNECTION_4G;default:return h.UNKNOWN}}()},application_process_state:0};var t}function P(e){return Object.keys(e).map(function(t){return{key:t,value:e[t]}})}L.logHandler=M;var B=function(){function c(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state="uninitialized",this.customAttributes={},this.counters={},this.api=u.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||o+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return c.prototype.start=function(){if("uninitialized"!==this.state)throw new Error("Trace "+this.name+" is started before.");this.api.mark(this.traceStartMark),this.state="running"},c.prototype.stop=function(){if("running"!==this.state)throw new Error("Trace "+this.name+" is not running.");this.state="terminated",this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),A(this)},c.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]&&(this.counters[t]=new n),this.counters[t].incrementCounter(e)},c.prototype.putMetric=function(t,e){void 0===this.counters[t]&&(this.counters[t]=new n),this.counters[t].putCounter(e)},c.prototype.getMetric=function(t){return this.counters[t]&&this.counters[t].getCounterValue()||0},c.prototype.putAttribute=function(t,e){this.customAttributes[t]=e},c.prototype.getAttribute=function(t){return this.customAttributes[t]},c.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},c.prototype.getAttributes=function(){return Object.assign({},this.customAttributes)},c.prototype.getCounters=function(){var e=this,t=Object.keys(this.counters),n={};return t.forEach(function(t){return n[t]=e.counters[t].getCounterValue()}),n},c.prototype.setStartTime=function(t){this.startTimeUs=t},c.prototype.setDuration=function(t){this.durationUs=t},c.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},c.createOobTrace=function(t,e){var n=u.getInstance().getUrl();if(n){var r=new c("_wt_"+n,!0),o=Math.floor(1e3*u.getInstance().getTimeOrigin());if(r.setStartTime(o),t&&t[0]&&(r.setDuration(Math.floor(1e3*t[0].duration)),r.incrementMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),r.incrementMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),r.incrementMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e){var i=e.find(function(t){return"first-paint"===t.name});i&&i.startTime&&r.incrementMetric("_fp",Math.floor(1e3*i.startTime));var a=e.find(function(t){return"first-contentful-paint"===t.name});a&&a.startTime&&r.incrementMetric("_fcp",Math.floor(1e3*a.startTime));var s=u.getInstance().getTti();s&&r.incrementMetric("_tti",Math.floor(1e3*s))}A(r)}},c.createUserTimingTrace=function(t){A(new c(t,!1,t))},c}(),W=function(){function s(t,e,n,r,o,i,a,s,c,u){this.url=t,this.httpMethod=e,this.requestPayloadBytes=n,this.responsePayloadBytes=r,this.httpResponseCode=o,this.responseContentType=i,this.startTimeUs=a,this.timeToRequestCompletedUs=s,this.timeToResponseInitiatedUs=c,this.timeToResponseCompletedUs=u}return s.createNetworkRequestEntry=function(t){if(t){var e,n=u.getInstance().getTimeOrigin(),r=Math.floor(1e3*(t.startTime+n)),o=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,i=Math.floor(1e3*(t.responseEnd-t.startTime)),a=new s(t.name,void 0,void 0,t.transferSize,void 0,void 0,r,void 0,o,i);e=a,v.getInstance().isInstrumentationEnabled&&"https://us-central1-fireperffw.cloudfunctions.net/cc"!==e.url&&L.log(e,R.NetworkRequest)}},s}(),j=function(){function t(){var t=this;this.api=u.getInstance(),document&&"complete"!==document.readyState?document.addEventListener("readystatechange",function(){"complete"===document.readyState&&t.setup()}):this.setup()}return t.prototype.setup=function(){var t=this;setTimeout(function(){t.setupOobTraces(),t.setupNetworkRequests(),t.setupUserTimingTraces()},0)},t.prototype.setupNetworkRequests=function(){for(var t=0,e=this.api.getEntriesByType("resource");t<e.length;t++){G(e[t])}this.api.setupObserver("resource",G)},t.prototype.setupOobTraces=function(){var t=this.api.getEntriesByType("navigation"),e=this.api.getEntriesByType("paint");B.createOobTrace(t,e)},t.prototype.setupUserTimingTraces=function(){for(var t=0,e=this.api.getEntriesByType("measure");t<e.length;t++){F(e[t])}this.api.setupObserver("measure",F)},t}();function G(t){W.createNetworkRequestEntry(t)}function F(t){var e=t.name;e.substring(0,o.length)!==o&&B.createUserTimingTrace(e)}var q=function(){function t(){new j}return t.prototype.newTrace=function(t){return new B(t)},Object.defineProperty(t.prototype,"isInstrumentationEnabled",{get:function(){return v.getInstance().isInstrumentationEnabled},set:function(t){v.getInstance().isInstrumentationEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDataCollectionEnabled",{get:function(){return v.getInstance().isDataCollectionEnabled},set:function(t){v.getInstance().isDataCollectionEnabled=t},enumerable:!0,configurable:!0}),t}();function H(){return new q}var V={performance:H,initializeApp:function(t){return function(t){if(t){var e=u.getInstance();e.setPerformance(t.performance),e.setPerformanceObserver(t.PerformanceObserver),e.setWindowLocation(t.location),e.setLocalStorage(t.localStorage),e.setNavigator(t.navigator),e.setDocument(t.document),t.ttiPolyfill&&e.setTti(t.ttiPolyfill)}}(window),v.getInstance().setAppId(t.appId),{performance:H}}};t.firebase=V}();